*** XPath/Builder.pm	Tue Jun 12 14:05:28 2001
--- ../XML-XPath-1.09-old/XPath/Builder.pm	Sun Apr  1 23:59:02 2001
*************** sub end_document {
*** 51,58 ****
  
  sub characters {
      my $self = shift;
!     my $sarg = shift;
!     my $text = $sarg->{Data};
      
      my $parent = $self->{current};
      
--- 51,57 ----
  
  sub characters {
      my $self = shift;
!     my $text = shift;
      
      my $parent = $self->{current};
      
*************** sub characters {
*** 69,78 ****
  
  sub start_element {
      my $self = shift;
!     my $sarg = shift;
!     my $tag  = $sarg->{'Name'};
!     my $attr = $sarg->{'Attributes'};
! 
      push @{ $self->{InScopeNamespaceStack} },
           { %{ $self->{InScopeNamespaceStack}[-1] } };
      $self->_scan_namespaces(@_);
--- 68,74 ----
  
  sub start_element {
      my $self = shift;
!     my $tag = shift;
      push @{ $self->{InScopeNamespaceStack} },
           { %{ $self->{InScopeNamespaceStack}[-1] } };
      $self->_scan_namespaces(@_);
*************** sub start_element {
*** 81,89 ****
      
      my $node = XML::XPath::Node::Element->new($tag, $prefix);
      
!     foreach my $name (keys %$attr) {
! 	my $value = $attr->{$name};
! 
          if ($name =~ /^xmlns(:(.*))?$/) {
              # namespace node
              my $prefix = $2 || '#default';
--- 77,85 ----
      
      my $node = XML::XPath::Node::Element->new($tag, $prefix);
      
!     my @attributes;
!     for (my $ii = 0; $ii < $#_; $ii += 2) {
! 	my ($name, $value) = ($_[$ii], $_[$ii+1]);
          if ($name =~ /^xmlns(:(.*))?$/) {
              # namespace node
              my $prefix = $2 || '#default';
